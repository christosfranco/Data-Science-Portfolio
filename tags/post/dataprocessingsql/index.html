<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>DataProcessingSQL | Main Page</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Web scrabing articles, processing them for input in SQL server">
    <meta name="generator" content="Hugo 0.80.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="https://christosfranco.github.io/Data-Science-Portfolio/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      

    

    
    
    <meta property="og:title" content="DataProcessingSQL" />
<meta property="og:description" content="Web scrabing articles, processing them for input in SQL server" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://christosfranco.github.io/Data-Science-Portfolio/post/dataprocessingsql/" />
<meta property="article:published_time" content="2021-02-12T11:25:05-04:00" />
<meta property="article:modified_time" content="2021-02-12T11:25:05-04:00" /><meta property="og:site_name" content="Main Page" />
<meta itemprop="name" content="DataProcessingSQL">
<meta itemprop="description" content="Web scrabing articles, processing them for input in SQL server">
<meta itemprop="datePublished" content="2021-02-12T11:25:05-04:00" />
<meta itemprop="dateModified" content="2021-02-12T11:25:05-04:00" />
<meta itemprop="wordCount" content="2655">



<meta itemprop="keywords" content="processing," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="DataProcessingSQL"/>
<meta name="twitter:description" content="Web scrabing articles, processing them for input in SQL server"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://christosfranco.github.io/Data-Science-Portfolio/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Main Page
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://christosfranco.github.io/Data-Science-Portfolio/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://christosfranco.github.io/Data-Science-Portfolio/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://christosfranco.github.io/Data-Science-Portfolio/post/" title="Projects page">
              Projects
            </a>
          </li>
          
        </ul>
      
      







<a href="https://linkedin.com/in/christian-arboe-franck/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/christosfranco/" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://christosfranco.github.io/Data-Science-Portfolio/post/dataprocessingsql/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://christosfranco.github.io/Data-Science-Portfolio/post/dataprocessingsql/&amp;text=DataProcessingSQL" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://christosfranco.github.io/Data-Science-Portfolio/post/dataprocessingsql/&amp;title=DataProcessingSQL" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">DataProcessingSQL</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-02-12T11:25:05-04:00">February 12, 2021</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><a href="https://github.com/christosfranco/Data-Processing-and-SQL-Analytics">Link to github repo</a></p>
<h1 id="know-our-data">Know our data</h1>
<h2 id="the-design-of-the-schema-that-contains-the-data-from-the-fakenews-corpus-data-set">The design of the schema that contains the data from the FakeNews Corpus data set</h2>
<p>In our design of the schema, we have tried to reduce various anomalies as much as possible. We started by cramming all the data into a single relation, but we quickly found out that this created a lot of anomalies. Therefore, we iteratively decomposed this relations until we ended up with the design that can be viewed on figure \ref{fig:er-diagram-fakenews-corpus}. By designing our database this way, we have reduced redundancy, update anomalies, and deletion anomalies significant.</p>
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/ER%20diagram%20Fakenews%20Corpus.png"/> 
</figure>

<p>The reason why we have a time relation, is that we found out that there are only 5 different timestamps. Therefore, we could remove many anomalies by making it a separate relation. For all the relationships that are one-to-many or many-to-many, we have likewise separated them into their own relations. This includes the following relations: keyword, typ, author, webpage, and domain.</p>
<p>We have assumed, that no article contains the same content, and no articles contains the same meta_description. We did find out, that some of the articles actually have the same title, so we could reduce anomalies by separating this attribute into its own relation. However, we decided to keep it as an attribute. Since we often use the title, it would make it cumbersome to make a natural join each time we need it.</p>
<h2 id="inherent-problems-with-the-data-from-the-fakenews-corpus-data-set-during-development">Inherent problems with the data from the Fakenews Corpus data set during development</h2>
<p>We found that some of the data is in the wrong fields, and some of it are not formatted correctly. Furthermore, we also found out that the fields keyword and summary are completely empty for all the articles. For many of the articles, the field called meta_descriptions does not contain anything.</p>
<p>Another problem we found while working with the data set was that we did not understand the difference between meta_keyword and keyword. We assume that meta_keyword contains the keywords of the articles. Likewise, we did not understand the difference between meta_description and summary. Here we assume that meta_description contains a summary of the articles.</p>
<p>Another problem with the data set is that there are two different IDs. The first ID is the unnamed field, which repeats itself after 100000 articles. The second ID, which is called id in the csv file, is quite random. Because of these two problems we create our own article_id instead of using the id&rsquo;s that were provided.</p>
<h2 id="properties-on-the-fakenews-corpus-data-set">Properties on the Fakenews Corpus data set</h2>
<p>The queries that we have used to get the statistics and visualizations, that can be seen below, can also be found in \hyperref[Appendix A]{Appendix A}.</p>
<p>From this table, one can see that our database contains a lot of articles.</p>
<hr>
<table>
<thead>
<tr>
<th>Basic Statistics</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Number of articles:</td>
<td>999992</td>
</tr>
<tr>
<td>Avg. number of keywords per article:</td>
<td>6.96</td>
</tr>
<tr>
<td>Avg. number of words per article:</td>
<td>271.32</td>
</tr>
</tbody>
</table>
<hr>
<p>In the figure below, one can see that the database does not contain a lot of reliable articles. It is also possible to observe that the distribution is not uniform. These two properties of the data set can create difficulties when we have to train our model for the predictor.
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_1.png"/> 
</figure>
</p>
<p>Our initial thought was that clickbait articles would contain a lot of keywords since they could be used to oversell the articles but this is not the case as can be seen in the figure.</p>
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_6.png"/> 
</figure>

<h3 id="the-20-domains-with-the-most-articles-scraped-from">The 20 domains with the most articles scraped from:</h3>
<p>From figure below, one can see that approximately 40% of the articles comes from the three domains: <a href="dailykos.com">dailykos</a>, <a href="wikileaks.org">wikileaks</a>, and
<a href="beforeitsnews.com">beforeitsnews</a>. If these three sites are labeled wrong, all the articles from these three domains are labeled wrong, which will have a huge impact on our predictor.</p>
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_2.png"/> 
</figure>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> count(<span style="color:#f92672">*</span>),
       domain_url,
       type_name
<span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>article
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>webpage
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span><span style="color:#66d9ef">domain</span>
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> domain_url,
         type_name
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> COUNT <span style="color:#66d9ef">DESC</span>
<span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">20</span>;</code></pre></div>
<h3 id="the-average-content-length-of-the-articles-of-each-type">The average content length of the articles of each type:</h3>
<p>Below we can see a figure of the article length (characters in the article) given the type that the article is labeled with. It is clear that the &ldquo;hate&rdquo; article type has a far higher average wordcount in relation to the other article types.
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_3.png"/> 
</figure>
</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> type_name,
       avg(content_length) <span style="color:#66d9ef">AS</span> avg_content_length
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> article_id,
          title,
          length(<span style="color:#66d9ef">content</span>) <span style="color:#66d9ef">AS</span> content_length,
          type_id
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>Article) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> type_name
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> avg_content_length <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h3 id="the-average-number-of-words-of-the-articles-of-each-type">The average number of words of the articles of each type:</h3>
<p>Below we see that the number of words correspont to the length of the article. It is there not beacuse the articles of type hate have far longer words in their articles that they have a longer average article length.
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_4.png"/> 
</figure>
</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> type_name,
       avg(word_count) <span style="color:#66d9ef">AS</span> avg_word_count
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> article_id,
          length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> content_length_no_spaces,
          length(<span style="color:#66d9ef">content</span>) <span style="color:#f92672">-</span> length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> word_count,
          type_id
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>Article) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> type_name
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> avg_word_count <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h3 id="the-average-word-length-of-the-articles-of-each-type">The average word length of the articles of each type:</h3>
<p>This is confirmed by selecting the average wordcount for each of the article types.
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/Figure_5.png"/> 
</figure>
</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> type_name,
       avg(content_length_no_spaces) <span style="color:#f92672">/</span> avg(word_count) <span style="color:#66d9ef">AS</span> avg_word_length
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> article_id,
          length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> content_length_no_spaces,
          length(<span style="color:#66d9ef">content</span>) <span style="color:#f92672">-</span> length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> word_count,
          type_id
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>Article) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> type_name
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> avg_word_length <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h2 id="experiences-with-scraping-from-the-politics-and-conflict-section-of-the-wikinews-site">Experiences with scraping from the &ldquo;Politics and Conflict&rdquo; section of the Wikinews site</h2>
<p>We started with the approach of using all the start urls on the form of:</p>
<p><a href="https://en.wikinews.org/w/index.php?title=Category:Politics_and_conflicts&amp;from=letter">https://en.wikinews.org/w/index.php?title=Category:Politics_and_conflicts&amp;from=letter</a>
where letter is [D-N].</p>
<p>The downside of this was, that not all articles was on their start letter page. This meant that some F articles was on another page, and was thus not included. Furthermore we got some articles from other letters. We solved this by checking for WantedArticles = r&quot;/wiki/[D-N]&quot;.</p>
<p>The next approach was to yield the parse() on itself when going to next page and starting on the D page. The spider would thus crawl to nextpage until it reached the letter O.</p>
<p>Extracting the specific information from each article was a bit of a hassle. Some articles' content are structured in tables while over 90%  have their content in paragraphs.</p>
<p>Below we have the first parser of the spider.</p>
<p>This spider will run over all of the articles and yield the url to the individual articles and parse them to the parse2 function (line 9). After having scraped all articles for one subpage it will proceed to the next page, if such exists (line 20)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#We want to follow the next page from the start urls until  we are finished entirely (at letter O)</span>
<span style="color:#75715e">#Will find all links in the start url that correspond to category</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse</span>(self, response):    
    links <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#39;/html/body/div[3]/div[3]/div[4]/div[2]/div[2]/div/div/div/ul/li/a/@href&#39;</span>)<span style="color:#f92672">.</span>extract()
    WantedArticles <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;/wiki/[D-N]&#34;</span> 

    <span style="color:#66d9ef">for</span> link <span style="color:#f92672">in</span> links:
        <span style="color:#66d9ef">if</span> link <span style="color:#f92672">and</span> (re<span style="color:#f92672">.</span>match(WantedArticles , link ) <span style="color:#f92672">!=</span> None):
            <span style="color:#66d9ef">yield</span> response<span style="color:#f92672">.</span>follow(url <span style="color:#f92672">=</span> link, callback <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>parse2)

    <span style="color:#75715e">#Change the last in the string to the last letter</span>
    forbiddenNextPage <span style="color:#f92672">=</span>  <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;https:\/\/en\.wikinews\.org\/w\/index\.php\?title=Category:Politics_and_conflicts&amp;pagefrom=O&#34;</span>
    <span style="color:#75715e">#This has to be get() instead of extract so that forbiddenNextPage in nextpageurl can be compared as strings</span>
    nextpageurl <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#34;//*[@id=&#39;mw-pages&#39;]/a[contains(.,&#39;next page&#39;)]/@href&#34;</span>)<span style="color:#f92672">.</span>get()
    nextpageurl <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>urljoin(nextpageurl)

    <span style="color:#75715e"># If we&#39;ve found a pattern which matches</span>
    <span style="color:#66d9ef">if</span> nextpageurl <span style="color:#f92672">and</span> (re<span style="color:#f92672">.</span>match(forbiddenNextPage , nextpageurl ) <span style="color:#f92672">==</span> None):
        <span style="color:#75715e"># Return a call to the function &#34;parse&#34;</span>
        <span style="color:#66d9ef">yield</span> scrapy<span style="color:#f92672">.</span>Request(nextpageurl, callback<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>parse) </code></pre></td></tr></table>
</div>
</div>
<p>Below we have the parser for each individual article that is parsed from function parse above.</p>
<p>The parse2 function will yield the title, url, keywords (only applicable to some), date of writting the article, sources used in article</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Will run over all individual articles and extract appropriate data</span>
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">parse2</span>(self, response): <span style="color:#75715e">#return individual article</span>
        
        title <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#39;/html/body/div[3]/h1/text()&#39;</span>)<span style="color:#f92672">.</span>get()

        content <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#34;&#34;&#34;/html/body/div[3]/div[3]/div[4]/div/p/descendant-or-self::text()[not( parent::strong | ancestor::i)]&#34;&#34;&#34;</span>)<span style="color:#f92672">.</span>extract()
        content <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(content)

        url <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>url

        <span style="color:#75715e"># Keywords and date</span>
        keywords <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#34;&#34;&#34;//div[contains(@class, &#39;mw-normal-catlinks&#39;)]/ul/descendant-or-self::text()&#34;&#34;&#34;</span>)<span style="color:#f92672">.</span>extract()
        finalkeywords <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;[</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#39;</span>
        written_at <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
        date_index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        dateRegexPattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;(?:january|february|march|april|may|june|july|august|september|october|november|december)(?: )(?:[\d]{1}|[\d]{2})(?:, )(?:1\d{3}|2\d{3})&#34;</span>
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(keywords)):
            keyword <span style="color:#f92672">=</span> keywords[i]<span style="color:#f92672">.</span>lower()
            <span style="color:#66d9ef">if</span>(re<span style="color:#f92672">.</span>fullmatch(dateRegexPattern, keyword) <span style="color:#f92672">!=</span> None):
                date_index <span style="color:#f92672">=</span> i
            <span style="color:#66d9ef">else</span>:  
                finalkeywords <span style="color:#f92672">+=</span> (keyword <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#39;</span>)   
        written_at <span style="color:#f92672">=</span> keywords[date_index]        
        keywords<span style="color:#f92672">.</span>pop(date_index)
        <span style="color:#66d9ef">if</span> len(finalkeywords) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>:
            finalkeywords <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
        <span style="color:#66d9ef">else</span>:     
            finalkeywords <span style="color:#f92672">=</span> finalkeywords[:<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;]&#39;</span>

        <span style="color:#75715e"># Sources</span>
        sources <span style="color:#f92672">=</span> []
        sourcesFromTemplate <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>xpath(<span style="color:#e6db74">&#34;&#34;&#34;//a[contains(@class, &#39;external text&#39;)]/@href&#34;&#34;&#34;</span>)
        <span style="color:#66d9ef">for</span> li <span style="color:#f92672">in</span> sourcesFromTemplate:
            temp <span style="color:#f92672">=</span> li<span style="color:#f92672">.</span>get()<span style="color:#f92672">.</span>lower()
            sources<span style="color:#f92672">.</span>append(temp)
            
        finalsources <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;[</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#39;</span>
        
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(sources)):
            source <span style="color:#f92672">=</span> sources[i]<span style="color:#f92672">.</span>lower()
            finalsources <span style="color:#f92672">+=</span> (source <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">, </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#39;</span>)
        
        <span style="color:#66d9ef">if</span> len(finalsources) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>:
            finalsources <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
        <span style="color:#66d9ef">else</span>:
            finalsources <span style="color:#f92672">=</span> finalsources[:<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;]&#39;</span>            

        <span style="color:#66d9ef">global</span> article_id 

        <span style="color:#66d9ef">yield</span> {
            <span style="color:#e6db74">&#39;article_id&#39;</span>   : article_id,
            <span style="color:#e6db74">&#39;title&#39;</span>        : title,
            <span style="color:#e6db74">&#39;sources&#39;</span>      : finalsources,
            <span style="color:#e6db74">&#39;scraped_at&#39;</span>   : scraped_at,
            <span style="color:#e6db74">&#39;content&#39;</span>      : content,
            <span style="color:#e6db74">&#39;keywords&#39;</span>     : finalkeywords,
            <span style="color:#e6db74">&#39;written_at&#39;</span>   : written_at,
            <span style="color:#e6db74">&#39;domain&#39;</span>       : domain,
            <span style="color:#e6db74">&#39;url&#39;</span>          : url,
            <span style="color:#e6db74">&#39;type&#39;</span>         : typ,
        }

        article_id <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="the-design-of-the-schema-that-contains-the-data-from-the-wikinews-fragment-data-set">The design of the schema that contains the data from the Wikinews Fragment data set</h2>
<p>We have designed the schema that contains the data from the Wikinews Fragment data set, more or less, like how we designed the schema, that contains the data from the Fakenews Corpus data set. The only differences between the Fakenews Corpus schema design, and this Wikinews Fragment schema design, is that we do not have a meta_description attribute. We do not have an updated_at or inserted_at date, but instead we have a written_at date, and that the articles do not have any authors but they instead have sources. The picture of the E/R diagram can be seen below
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/wikinews/ER%20diagram%20Wikinews%20Fragment.png"/> 
</figure>
</p>
<h2 id="basic-properties-of-the-wikinews-fragment-data-set">Basic properties of the Wikinews Fragment data set</h2>
<p>In the table below, one can see that our Wikinews Fragment does not contain a lot of articles. However, since they are all classified as reliable, if we combine these with our Fakenews Corpus data set, we get approximately  50%  more reliable articles than was contained in the Fakenews Corpus data set.</p>
<p>From the statistics in the table, we can also observe, that the articles are quite small. We can also see, that the average number of words per article is 176, compared to 271 which was the average number of words per article in the Fakenews Corpus data set.</p>
<hr>
<table>
<thead>
<tr>
<th>Basic Statistics</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Number of articles:</td>
<td>2747</td>
</tr>
<tr>
<td>Avg. number of keywords per article:</td>
<td>9.51</td>
</tr>
<tr>
<td>Avg. number of words per article :</td>
<td>176.89</td>
</tr>
</tbody>
</table>
<hr>
<p>In figure we can observe that distribution of when the articles were published is not uniform. We can see that the vast majority of the articles are from before 2009.</p>
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/wikinews/Figure_1_wiki.png"/> 
</figure>

<p>In figure we can see that we could cut the length of the content of the articles to 500 words and get the vast majority of the data. This could be a good idea to reduce the use of memory and computation.</p>
<figure>
    <img src="https://christosfranco.github.io/Data-Science-Portfolio/images/FakeNews/wikinews/Figure_2_wiki.png"/> 
</figure>

<h2 id="integration-of-the-fakenews-corpus-data-set-and-wikinews-fragment-data-set">Integration of the Fakenews Corpus data set and Wikinews Fragment data set</h2>
<p>The sql command that creates the view can be found at \hyperref[sql-command to create view]{Appendix E}. We have tried to get as much of the meta data integrated in this view as possible.</p>
<p>In the view each article has the following attributes: content, title, type, domain, and url. We could have included scraped_at, but we thought that it is not very useful in regards to our predictor. We decided to not include the information that is represented as many-to-many relationships such as keywords since that would blow up the size of the view.</p>
<p>Our view contains 1002602 articles.</p>
<h2 id="choosing-a-dataset">Choosing a dataset</h2>
<p>Since our predictor cannot be trained on more than 50k articles, and the Fakenews Corpus dataset contains around 6000 reliable articles, in order to get a balanced training set, we are not able to include the Wikinews Fragment dataset. Furthermore the classification used to determine all wikinews articles as being reliable does not have any merit to back it up. If we had access to better machines, it would not be a problem to use the view described in  1.7 that contains both data sets.</p>
<h2 id="classification-into-fake-and-real">Classification into fake and real</h2>
<p>We will classify the articles that are reliable or political as real, and all other  articles of the other types as fake. The reasoning behind this, is that we would rather have fake negatives than fake positives. Considering the majority of the article types as being fake, will grant us a better insurance that we do not falsely classify fake content as being real. There is either a clear malicious intent (hate, click-bait, fake), or unintended false, or unjustified content (junk-science, satire, conspiracy, unreliable). Content that is considered in the fakenewscorpus as &ldquo;on the line&rdquo; will be classified as fake as well (unknown, bias).</p>
<h1 id="establish-a-baseline">Establish a baseline</h1>
<h2 id="basic-models-on-content">Basic models on content</h2>
<p>In our baseline model we will use a TF-IDF vectorizer to structure the words and their frequency compared to the general frequency of all the training articles. We utilize 457828 article contents and we use two baseline models: a linear SVC, and a Dummy classifier. By the use of these two models we get the results described in this table.</p>
<hr>
<table>
<thead>
<tr>
<th>Classifier</th>
<th>Liar</th>
<th>Fakenews</th>
<th>Kaggle</th>
</tr>
</thead>
<tbody>
<tr>
<td>LinearSVC</td>
<td>0.514</td>
<td>0.78</td>
<td>0.648</td>
</tr>
<tr>
<td>Dummy</td>
<td>0.499</td>
<td>0.501</td>
<td>0.502</td>
</tr>
</tbody>
</table>
<h2 id="including-additional-fields">Including additional fields</h2>
<p>In the beginning we thought it could make sense to use keywords. However, a problem with this is that a lot of the articles in our database do not have any keywords.</p>
<p>It might make sense to use the title of the article as a feature. Although, it is short and we expect that more distinct information is found in the content. However, the title in of itself could be used to determine whether an article is a clickbait.</p>
<p>We decide overall that these features from meta-data would not contribute to the general performance of a model.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="appendices">Appendices</h1>
<h2 id="appendix-a---sql-queries-to-get-the-properties-of-the-fakenews-corpus-data-set">Appendix A - SQL queries to get the properties of the Fakenews Corpus data set</h2>
<h3 id="number-of-articles">Number of articles:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> count(<span style="color:#f92672">*</span>)
  <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>article;</code></pre></div>
<h3 id="the-average-number-of-keywords-for-each-article">The average number of keywords for each article:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> Avg(keyword_count) <span style="color:#66d9ef">AS</span> avg_keyword_count
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> article_id,
          Count(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> keyword_count
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>tags <span style="color:#66d9ef">GROUP</span>  <span style="color:#66d9ef">BY</span> article_id) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>article;</code></pre></div>
<h3 id="the-average-number-of-words-for-each-article">The average number of words for each article:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> avg(word_count) <span style="color:#66d9ef">AS</span> avg_word_count
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> length(<span style="color:#66d9ef">content</span>) <span style="color:#f92672">-</span> length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> word_count
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>article) <span style="color:#66d9ef">AS</span> tmpTable;</code></pre></div>
<h3 id="distribution-of-articles-over-types">Distribution of articles over types:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> count(<span style="color:#f92672">*</span>),
       type_name
<span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>article
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> type_name
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> COUNT <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h3 id="the-average-number-of-keywords-of-the-articles-of-each-type">The average number of keywords of the articles of each type:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> type_name, 
       Avg(keyword_count) <span style="color:#66d9ef">AS</span> avg_keyword_count 
<span style="color:#66d9ef">FROM</span>   (<span style="color:#66d9ef">SELECT</span> article_id, 
               Count(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> keyword_count 
        <span style="color:#66d9ef">FROM</span>   fakenewscorpus<span style="color:#ae81ff">.</span>tags 
        <span style="color:#66d9ef">GROUP</span>  <span style="color:#66d9ef">BY</span> article_id) <span style="color:#66d9ef">AS</span> tmpTable 
       <span style="color:#66d9ef">natural</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>article 
       <span style="color:#66d9ef">natural</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ 
<span style="color:#66d9ef">GROUP</span>  <span style="color:#66d9ef">BY</span> type_name 
<span style="color:#66d9ef">ORDER</span>  <span style="color:#66d9ef">BY</span> avg_keyword_count <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h2 id="appendix-d---sql-queries-to-get-the-properties-of-the-wikinews-fragment-data-set">Appendix D - SQL queries to get the properties of the Wikinews Fragment data set</h2>
<h3 id="number-of-articles-1">Number of articles:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> count(<span style="color:#f92672">*</span>)
<span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>article;</code></pre></div>
<h3 id="the-distribution-of-the-number-of-articles-over-dates">The distribution of the number of articles over dates:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> count(<span style="color:#f92672">*</span>),
       time
<span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>article
<span style="color:#66d9ef">INNER</span> <span style="color:#66d9ef">JOIN</span> wikinewsfragment<span style="color:#ae81ff">.</span>time <span style="color:#66d9ef">ON</span> wikinewsfragment<span style="color:#ae81ff">.</span>article<span style="color:#ae81ff">.</span>written_at_time_id <span style="color:#f92672">=</span> wikinewsfragment<span style="color:#ae81ff">.</span>time<span style="color:#ae81ff">.</span>time_id
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> time
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> COUNT <span style="color:#66d9ef">DESC</span>;</code></pre></div>
<h3 id="the-average-minimum-and-maximum-number-of-keywords-for-each-article">The average, minimum, and maximum number of keywords for each article:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> Avg(keyword_count) <span style="color:#66d9ef">AS</span> avg_keyword_count,
       Min(keyword_count) <span style="color:#66d9ef">AS</span> min_keyword_count,
       Max(keyword_count) <span style="color:#66d9ef">AS</span> max_keyword_count
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> article_id,
          Count(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> keyword_count
   <span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>tags <span style="color:#66d9ef">GROUP</span>  <span style="color:#66d9ef">BY</span> article_id) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> wikinewsfragment<span style="color:#ae81ff">.</span>article;</code></pre></div>
<h3 id="the-number-of-distribution-of-the-articles-with-a-specific-number-of-words">The number of distribution of the articles with a specific number of words:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> word_count,
       count(<span style="color:#f92672">*</span>)
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> length(<span style="color:#66d9ef">content</span>) <span style="color:#f92672">-</span> length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> word_count
   <span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>article) <span style="color:#66d9ef">AS</span> tmpTable
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> word_count
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> word_count;</code></pre></div>
<h3 id="the-average-minimum-and-maximum-number-of-words-for-each-article">The average, minimum, and maximum number of words for each article:</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">SELECT</span> avg(word_count) <span style="color:#66d9ef">AS</span> avg_word_count,
       min(word_count) <span style="color:#66d9ef">AS</span> min_word_count,
       max(word_count) <span style="color:#66d9ef">AS</span> max_word_count
<span style="color:#66d9ef">FROM</span>
  (<span style="color:#66d9ef">SELECT</span> length(<span style="color:#66d9ef">content</span>) <span style="color:#f92672">-</span> length(<span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">content</span>, <span style="color:#e6db74">&#39; &#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">AS</span> word_count
   <span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>article) <span style="color:#66d9ef">AS</span> tmpTable;</code></pre></div>
<h2 id="appendix-e---query-to-create-the-view-that-integrates-the-two-data-sets">Appendix E - Query to create the view that integrates the two data sets</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-postgresql" data-lang="postgresql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> integrateFakenewsSources <span style="color:#66d9ef">AS</span>
  (<span style="color:#66d9ef">SELECT</span> title,
          type_name,
          <span style="color:#66d9ef">content</span>,
          url,
          domain_url
   <span style="color:#66d9ef">FROM</span> wikinewsfragment<span style="color:#ae81ff">.</span>article
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> wikinewsfragment<span style="color:#ae81ff">.</span>typ
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> wikinewsfragment<span style="color:#ae81ff">.</span>webpage
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> wikinewsfragment<span style="color:#ae81ff">.</span><span style="color:#66d9ef">domain</span>)
<span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
  (<span style="color:#66d9ef">SELECT</span> title,
          type_name,
          <span style="color:#66d9ef">content</span>,
          url,
          domain_url
   <span style="color:#66d9ef">FROM</span> fakenewscorpus<span style="color:#ae81ff">.</span>article
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>typ
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span>webpage
   <span style="color:#66d9ef">NATURAL</span> <span style="color:#66d9ef">JOIN</span> fakenewscorpus<span style="color:#ae81ff">.</span><span style="color:#66d9ef">domain</span>);</code></pre></div>
<p>Made in collaboration with</p>
<p><a href="https://linkedin.com/in/marcus-mathiesen">MarcusTM linkedin</a></p>
<p><a href="https://github.com/christosfranco/Data-Processing-and-SQL-Analytics">Link to github repo</a></p>
<ul class="pa0">
  
   <li class="list">
     <a href="https://christosfranco.github.io/Data-Science-Portfolio/tags/processing" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">processing</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://christosfranco.github.io/Data-Science-Portfolio/" >
    &copy;  Main Page 2021 
  </a>
    <div>







<a href="https://linkedin.com/in/christian-arboe-franck/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/christosfranco/" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

  </body>
</html>
